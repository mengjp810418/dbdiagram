"use strict";(globalThis["webpackChunkdbdiagram_oss"]=globalThis["webpackChunkdbdiagram_oss"]||[]).push([[294],{6294:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Te});var a=t(9835),o=t(6970),n=t(499),i=t(5424),s=t(9302);function r(e,l,t,n,i,s){const r=(0,a.up)("q-tab"),c=(0,a.up)("q-tabs"),d=(0,a.up)("q-toolbar"),m=(0,a.up)("q-tab-panel"),u=(0,a.up)("q-tab-panels"),p=(0,a.up)("q-space"),g=(0,a.up)("q-btn"),f=(0,a.up)("dialog-layout"),_=(0,a.up)("q-card"),b=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(b,{ref:"dialogRef",onHide:n.onDialogHide,seamless:"theme"===n.tab},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"q-dialog-plugin ace-preferences-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{header:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>n.tab=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tabs,(e=>((0,a.wg)(),(0,a.j4)(r,{name:e.name},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])])),_:1})])),footer:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p),(0,a.Wm)(g,{flat:"",color:"primary",label:"OK",onClick:n.onOKClick},null,8,["onClick"]),(0,a.Wm)(g,{flat:"",color:"primary",label:"Cancel",onClick:n.onCancelClick},null,8,["onClick"])])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:n.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>n.tab=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tabs,(e=>((0,a.wg)(),(0,a.j4)(m,{name:e.name},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.component)))])),_:2},1032,["name"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["onHide","seamless"])}var c=t(906),d=t(9684),m=t.n(d);const u=e=>((0,a.dD)("data-v-e5e3a5d6"),e=e(),(0,a.Cn)(),e),p=u((()=>(0,a._)("div",{class:"ace_gutter","aria-hidden":"true",style:{left:"0px",width:"2rem"}},[(0,a._)("div",{class:"ace_layer ace_gutter-layer ace_folding-enabled",style:{height:"1e+06px",top:"0px",left:"0px",width:"2rem"}},[(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"0rem"}},[(0,a.Uk)("1"),(0,a._)("span",{style:{display:"none"}})]),(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"1rem"}},[(0,a.Uk)("2"),(0,a._)("span",{style:{display:"none"}})]),(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"2rem"}},[(0,a.Uk)("3"),(0,a._)("span",{style:{display:"none"}})]),(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"3rem"}},[(0,a.Uk)("4"),(0,a._)("span",{style:{display:"none"}})]),(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"4rem"}},[(0,a.Uk)("5"),(0,a._)("span",{style:{display:"none"}})]),(0,a._)("div",{class:"ace_gutter-cell",style:{height:"1rem",top:"5rem"}},[(0,a.Uk)("6"),(0,a._)("span",{style:{display:"none"}})])])],-1))),g=u((()=>(0,a._)("div",{class:"ace_scroller",style:{"line-height":"1rem",left:"2rem"}},[(0,a._)("div",{class:"ace_content"},[(0,a._)("div",{class:"ace_layer ace_marker-layer"},[(0,a._)("div",{class:"ace_active-line",style:{height:"1rem",top:"1rem",left:"0px",right:"0px"}})]),(0,a._)("div",{class:"ace_layer ace_text-layer"},[(0,a._)("div",{class:"ace_line",style:{height:"1rem",top:"0rem"}},[(0,a._)("span",{class:"ace_keyword"},"Table"),(0,a.Uk)(),(0,a._)("span",{class:"ace_identifier"},"products"),(0,a.Uk)(),(0,a._)("span",{class:"ace_paren ace_lparen"},"{")]),(0,a._)("div",{class:"ace_line",style:{height:"1rem",top:"1rem"}},[(0,a.Uk)(" id "),(0,a._)("span",{class:"ace_support ace_function"},"int"),(0,a.Uk)(" ["),(0,a._)("span",{class:"ace_identifier"},"pk"),(0,a.Uk)("]")]),(0,a._)("div",{class:"ace_line",style:{height:"1rem",top:"2rem"}},[(0,a.Uk)(" name "),(0,a._)("span",{class:"ace_support ace_function"},"varchar")]),(0,a._)("div",{class:"ace_line",style:{height:"1rem",top:"3rem"}},[(0,a.Uk)(" merchant_id "),(0,a._)("span",{class:"ace_support ace_function"},"int"),(0,a.Uk)(" ["),(0,a._)("span",{class:"ace_identifier"},"not"),(0,a.Uk)(),(0,a._)("span",{class:"ace_identifier"},"null"),(0,a.Uk)("]")]),(0,a._)("div",{class:"ace_line",style:{height:"1rem",top:"4rem"}},[(0,a.Uk)(" price "),(0,a._)("span",{class:"ace_support ace_function"},"int")])])])],-1))),f=[p,g],_={class:"q-my-xs q-mx-sm text-caption"};function b(e,l,t,n,i,s){const r=(0,a.up)("q-card-section"),c=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(c,{class:(0,o.C_)([["ace-theme-preview-card","q-ma-sm",{"ace-theme-preview-card__active":t.active}],"flex column"]),style:(0,o.j5)(`width:${t.width};height:${t.height};`),bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"col col-grow"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,o.C_)(["ace_editor",`ace-${t.theme.name}`,`ace-${t.theme.name.replace("_","-")}`,{ace_dark:!!t.theme.isDark}])},f,2)])),_:1}),(0,a.Wm)(r,{class:"col-auto text-center"},{default:(0,a.w5)((()=>[(0,a._)("div",_,(0,o.zw)(t.theme.caption),1)])),_:1})])),_:1},8,["class","style"])}const y={name:"AceThemePreviewCard",props:{theme:{type:Object,required:!0},width:{type:[String,Number],default:()=>"10rem"},height:{type:[String,Number],default:()=>"8rem"},active:{type:Boolean,default:()=>!1}}};var w=t(1639),h=t(4458),v=t(3190),k=t(9984),q=t.n(k);const C=(0,w.Z)(y,[["render",b],["__scopeId","data-v-e5e3a5d6"]]),W=C;function x(e,l,t,o,n,i){const s=(0,a.up)("q-header"),r=(0,a.up)("q-page-container"),c=(0,a.up)("q-footer"),d=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(d,{view:"hHh lpr lFr",container:"",style:"height:100%"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"header")])),_:3}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3}),(0,a.Wm)(c,{class:"bg-dark"},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"footer")])),_:3})])),_:3})}q()(y,"components",{QCard:h.Z,QCardSection:v.Z});const U={name:"DialogLayout"};var S=t(7605),Z=t(6602),V=t(2133),Q=t(9860);const I=(0,w.Z)(U,[["render",x]]),D=I;q()(U,"components",{QLayout:S.Z,QHeader:Z.Z,QPageContainer:V.Z,QFooter:Q.Z});var F=t(1474),z=t(1306);const R={class:"q-gutter-y-lg"},H={class:"q-gutter-y-md"},$=(0,a._)("div",{class:"text-subtitle1"},"Grid",-1),T={class:"row q-col-gutter-x-sm"},j={class:"row q-col-gutter-x-sm"},B={class:"text-subtitle1"},E={class:"row q-col-gutter-md"},L={class:"row q-col-gutter-x-md"},N={__name:"GeneralTab",setup(e){const l=(0,F.g)(),t=(0,z.T)();function o(){t.checkSettings()&&t.saveRepoConfig()}return t.loadRepoConfig(),(e,i)=>{const s=(0,a.up)("q-input"),r=(0,a.up)("q-separator"),c=(0,a.up)("q-btn"),d=(0,a.up)("q-space");return(0,a.wg)(),(0,a.iD)("div",R,[(0,a._)("div",H,[$,(0,a._)("div",T,[(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(l).grid.size,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,n.SU)(l).grid.size=e),modelModifiers:{number:!0},type:"number","stack-label":"",label:"Grid Size"},null,8,["modelValue"]),(0,a.Wm)(s,{class:"col-md-3 col-lg-2 col-xl-2",modelValue:(0,n.SU)(l).grid.divisions,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,n.SU)(l).grid.divisions=e),modelModifiers:{number:!0},type:"number","stack-label":"",label:"Divisions"},null,8,["modelValue"])]),(0,a._)("div",j,[(0,a.Wm)(s,{class:"col-md-3 col-lg-2 col-xl-2",modelValue:(0,n.SU)(l).grid.snap,"onUpdate:modelValue":i[2]||(i[2]=e=>(0,n.SU)(l).grid.snap=e),modelModifiers:{number:!0},type:"number","stack-label":"",label:"Snap"},null,8,["modelValue"])])]),(0,a.Wm)(r),(0,a._)("div",null,[(0,a._)("div",B,[(0,a.Uk)("Repository (S3) "),(0,a.Wm)(c,{class:"q-ma-sm",color:"purple",label:"save",onClick:i[3]||(i[3]=()=>o())})]),(0,a._)("div",E,[(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).host,"onUpdate:modelValue":i[4]||(i[4]=e=>(0,n.SU)(t).host=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Host"},null,8,["modelValue"]),(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).bucket,"onUpdate:modelValue":i[5]||(i[5]=e=>(0,n.SU)(t).bucket=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Bucket"},null,8,["modelValue"]),(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).path,"onUpdate:modelValue":i[6]||(i[6]=e=>(0,n.SU)(t).path=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Path"},null,8,["modelValue"])]),(0,a._)("div",L,[(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).region,"onUpdate:modelValue":i[7]||(i[7]=e=>(0,n.SU)(t).region=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Region"},null,8,["modelValue"]),(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).access_key,"onUpdate:modelValue":i[8]||(i[8]=e=>(0,n.SU)(t).access_key=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Access_key"},null,8,["modelValue"]),(0,a.Wm)(s,{class:"col-md-4 col-lg-3",modelValue:(0,n.SU)(t).secret_key,"onUpdate:modelValue":i[9]||(i[9]=e=>(0,n.SU)(t).secret_key=e),modelModifiers:{trim:!0},type:"string","stack-label":"",label:"Secret_key"},null,8,["modelValue"])])]),(0,a.Wm)(d)])}}};var A=t(4152),O=t(926),K=t(8879),M=t(136);const P=N,Y=P;q()(N,"components",{QInput:A.Z,QSeparator:O.Z,QBtn:K.Z,QSpace:M.Z});const G={class:"flex row justify-evenly"},J={__name:"ThemeTab",setup(e){const l=(0,i.E)(),t=m().require("ace/ext/themelist"),o=(0,n.iH)(t.themes);function s(e){l.preferences.theme=e.name}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",G,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.value,(e=>((0,a.wg)(),(0,a.j4)((0,n.SU)(W),{key:e,theme:e,width:"30%",active:(0,n.SU)(l).preferences.theme===e.name,onClick:()=>s(e)},null,8,["theme","active","onClick"])))),128))]))}},X=J,ee=X,le={name:"PreferencesDialog",components:{DialogLayout:D},props:{},emits:[...c.Z.emits],setup(){const{dialogRef:e,onDialogHide:l,onDialogOK:t,onDialogCancel:a}=(0,c.Z)(),o=(0,n.iH)([{name:"general",label:"General",component:Y},{name:"thene",label:"Theme",component:ee}]);return{tabs:o,dialogRef:e,onDialogHide:l,onOKClick(){t()},onCancelClick:a,tab:(0,n.iH)("general")}}};var te=t(7743),ae=t(1663),oe=t(2230),ne=t(900),ie=t(9800),se=t(4106);const re=(0,w.Z)(le,[["render",r],["__scopeId","data-v-0b182c32"]]),ce=re;q()(le,"components",{QDialog:te.Z,QCard:h.Z,QToolbar:ae.Z,QTabs:oe.Z,QTab:ne.Z,QTabPanels:ie.Z,QTabPanel:se.Z,QSpace:M.Z,QBtn:K.Z});var de=t(3216),me=t(9403),ue=t.n(me);t(4477);const pe={style:{margin:"10px"}},ge={class:"q-gutter-y-lg"},fe={__name:"VDbExportDialog",props:{id:{type:String,required:!0},file_name:{type:String,required:!0}},emits:[...c.Z.emits],setup(e){const l=e,t=(0,s.Z)(),i=(0,F.g)(),r=(0,n.iH)(l.file_name),d=(0,n.iH)(300);function m(e){const t=document.createElement("a"),a=e,o=window.URL.createObjectURL(a);t.setAttribute("href",o),t.setAttribute("download",l.file_name),t.click(),URL.revokeObjectURL(o),document.removeChild(t)}const{dialogRef:u,onDialogHide:p,onDialogOK:g,onDialogCancel:f}=(0,c.Z)();function _(){t.notify({caption:"Export",message:"Saving file...",multiLine:!0,timeout:2e3,color:"indigo-7",spinner:!0,position:"center"}),b(),g()}function b(){const e=(0,de.B)(),a=ue().createInstance({name:"dbdiagram-oss",storeName:"files"});if("json"==l.id&&a.getItem(e.getCurrentFile).then((e=>{m(new Blob([JSON.stringify(e)],{type:"application/json"}))})),"svg"==l.id){let e=y();m(new Blob([e.svg.outerHTML.trim()]))}if("png"==l.id){let e=y();var o=new Image;o.height=e.size.height,o.width=e.size.width,o.src="data:image/svg+xml;base64,"+window.btoa((new XMLSerializer).serializeToString(e.svg));let l=d.value/96;o.onload=function(){console.log("load image");var e=document.createElement("canvas");e.width=o.width*l,e.height=o.height*l;var t=e.getContext("2d");t.drawImage(o,0,0),t.setTransform(l,0,0,l,0,0);var a=document.createElement("a");a.download=r.value,a.href=e.toDataURL("image/png",1),document.body.appendChild(a),a.click()}}t.notify({caption:"Export",message:`File ${r.value} successfully exported`,color:"green",icon:"task",position:"bottom-right"})}function y(){let e=document.createElement("div"),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("class","db-chart db-chart__bg"),l.setAttribute("version","1.1"),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let t=w({l:0,r:0,t:0,b:0},i.getTables);t=w(t,i.getTableGroups);let a=i.getRefs;console.log(a);for(let i in a)a[i].vertices.length>0&&(t=w(t,a[i].vertices,!0));let o={width:Math.abs(t.l)+t.r+40,height:Math.abs(t.t)+t.b+40};l.setAttribute("viewBox",`${t.l-20} ${t.t-20} ${o.width}  ${o.height}`);var n=document.getElementById("tablegroups-layer");l.appendChild(n.cloneNode(!0));var s=document.getElementById("tables-layer");l.appendChild(s.cloneNode(!0));let r=l.getElementById("tables-layer").getElementsByClassName("db-table-header__color-icon");while(r.length>0)r[0].parentNode.removeChild(r[0]);let c=l.getElementById("tables-layer").getElementsByClassName("db-field__note-icon");while(c.length>0)c[0].parentNode.removeChild(c[0]);var d=document.getElementById("refs-layer");l.appendChild(d.cloneNode(!0));let m=l.getElementById("refs-layer").children;for(let i of m)i.removeChild(i.getElementsByClassName("db-ref__control-points")[0]);return e.appendChild(l),h(e,["fill","font-family","font-size","stroke","stroke-width","stroke-linejoin","stroke-opacity","stroke-linecap","transform","text-anchor","font-weight","vertical-align"],["background-color"]),{svg:l,size:o}}function w(e,l,t=!1){for(let a in l)l[a].x<e.l&&(e.l=l[a].x),l[a].y<e.t&&(e.t=l[a].y),t||(l[a].x+l[a].width>e.r&&(e.r=l[a].x+l[a].width),l[a].y+l[a].height>e.b&&(e.b=l[a].y+l[a].height));return e}function h(e,l,t){let a=window.getComputedStyle(document.body),o=document.styleSheets;for(let n=0;n<o.length;n++){let i=o[n].cssRules;for(let o=0;o<i.length;o++){let n=i[o];if("undefined"!=typeof n.style){let o=e.querySelectorAll(n.selectorText);if(o.length>0)for(let e of o)if(n.style.length>0)for(let o=0;o<n.style.length;o++){if(l.some((e=>e===n.style[o]))){let l=q(n.style[n.style[o]],a);null==l&&(l=n.style[n.style[o]]),"transform"==n.style[o]&&(l=v(l)),e.setAttribute(n.style[o],l)}if(t.some((e=>e===n.style[o]))){let l=q(n.style[n.style[o]],a);null==l&&(l=n.style[n.style[o]]);let t=e.getAttribute("style");null!=t?e.setAttribute("style",`${t} ${n.style[o]}:${l};`):e.setAttribute("style",`${n.style[o]}:${l};`)}}}}}}function v(e){const l=RegExp(/translateX\(([+-]?\d+\.?\d*)(.*?)\) translateY\(([+-]?\d+\.?\d*)(.*?)\)/,"iu");if(l.test(e)){let t=l.exec(e);return`translate(${k(t[1],t[2])} ${k(t[3],t[4])})`}return e}function k(e,l){return"px"==l?e:"em"==l?16*Number(e):e+l}function q(e,l){const t=RegExp(/var\((--.*?)\)/,"iu");if(t.test(e)){let a=t.exec(e);return l.getPropertyValue(a[1])}return null}return(e,t)=>{const i=(0,a.up)("q-icon"),s=(0,a.up)("q-bar"),c=(0,a.up)("q-input"),m=(0,a.up)("q-card-section"),g=(0,a.up)("q-btn"),b=(0,a.up)("q-card-actions"),y=(0,a.up)("q-card"),w=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(w,{ref_key:"dialogRef",ref:u,onHide:(0,n.SU)(p)},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"q-dialog-plugin ace-preferences-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"download"}),(0,a._)("h6",pe,"Export "+(0,o.zw)(l.id),1)])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a._)("div",ge,[(0,a.Wm)(c,{class:"col-md-4 col-lg-3",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),type:"string","stack-label":"",label:"File name"},null,8,["modelValue"]),"png"==l.id?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"col-md-4 col-lg-3",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),type:"number","stack-label":"",label:"PNG Resolution"},null,8,["modelValue"])):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(b,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{flat:"",color:"primary",label:"Cancel",onClick:(0,n.SU)(f)},null,8,["onClick"]),(0,a.Wm)(g,{flat:"",color:"primary",label:"OK",onClick:_})])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var _e=t(4526),be=t(2857),ye=t(1821);const we=fe,he=we;q()(fe,"components",{QDialog:te.Z,QCard:h.Z,QBar:_e.Z,QIcon:be.Z,QCardSection:v.Z,QInput:A.Z,QCardActions:ye.Z,QBtn:K.Z});const ve={style:{margin:"10px"}},ke={class:"q-gutter-y-lg"},qe={__name:"VDbImportDialog",props:{id:{type:String,required:!0}},emits:[...c.Z.emits],setup(e){const l=e,{dialogRef:t,onDialogHide:i,onDialogOK:r,onDialogCancel:d}=(0,c.Z)(),m=(0,de.B)(),u=ue().createInstance({name:"dbdiagram-oss",storeName:"files"}),p=(0,s.Z)(),g=(0,n.iH)(null),f=(0,n.iH)(),_=()=>`.${l.id}`,b=e=>e.filter((e=>"application/json"===e.type)),y=e=>{p.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints, wrong type`})};function w(e){return e=e.split("\\").pop(),{name:e.substring(0,e.lastIndexOf(".")),extension:e.split(".").pop()}}function h(e,l){v(e,(e=>{if(console.log(f.value),null!=e.error)p.notify({caption:"Import",message:`${g.value.name} ${e.error}`,multiLine:!0,color:"red",icon:"warning",position:"bottom-right"});else{if("R"==l&&(u.setItem(f.value,e.data).then((()=>{m.loadFile(f.value)})),p.notify({caption:"Import",message:`File ${f.value} replaced`,multiLine:!0,color:"green",icon:"upload",position:"bottom-right"})),"SC"==l){let l=0,t=f.value;while(m.getFiles.includes(t))t=t+"_copy"+l,l++;u.setItem(t,e.data).then((()=>{m.loadFile(t)})),p.notify({caption:"Import",message:`File copy ${f.value} saved`,multiLine:!0,color:"green",icon:"upload",position:"bottom-right"})}"S"==l&&u.setItem(f.value,e.data).then((()=>{m.loadFile(f.value)})),r()}}))}function v(e,l){function t(l){let t=new FileReader;t.addEventListener("load",(e=>{let a,o=t.result,n=null,i=JSON.parse(o);void 0!=i.source&&void 0!=i.preferences&&void 0!=i.chart?a=i:n="The file structure is incompatible with the application";let s={data:a,error:n};l(s)})),t.readAsText(e)}t(l)}function k(){if(null!=g.value){w(g.value.name);m.getFiles.includes(f.value)?p.notify({caption:"Import",message:`File ${f.value} already exists`,multiLine:!0,color:"indigo-7",icon:"upload",position:"center",actions:[{label:"Replace",color:"red",handler:()=>{h(g.value,"R")}},{label:"Save copy",color:"green",handler:()=>{h(g.value,"SC")}},{label:"Dismiss",color:"grey",handler:()=>{p.notify({caption:"Import",message:`${f.value} not saved`,multiLine:!0,color:"red",icon:"warning",position:"bottom-right"})}}]}):(h(g.value,"S"),p.notify({caption:"Import",message:`File ${f.value} imported`,multiLine:!0,color:"green",icon:"upload",position:"bottom-right"}),r())}else p.notify({caption:"Import",message:"File not selected",multiLine:!0,color:"red",icon:"warning",position:"bottom-right"})}function q(e){console.log(e.target),console.log(e.target.value);let l=w(e.target.value);f.value=l.name}function C(){g.value=null}return(e,s)=>{const r=(0,a.up)("q-icon"),c=(0,a.up)("q-bar"),m=(0,a.up)("q-file"),u=(0,a.up)("q-input"),p=(0,a.up)("q-card-section"),w=(0,a.up)("q-btn"),h=(0,a.up)("q-card-actions"),v=(0,a.up)("q-form"),W=(0,a.up)("q-card"),x=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(x,{ref_key:"dialogRef",ref:t,onHide:(0,n.SU)(i)},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{class:"q-dialog-plugin ace-preferences-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"download"}),(0,a._)("h6",ve,"Import "+(0,o.zw)(l.id),1)])),_:1}),(0,a.Wm)(v,{onSubmit:k,onReset:C},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a._)("div",ke,[(0,a.Wm)(m,{class:"col-md-4 col-lg-3",modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),filter:b,label:"Browse file",accept:_(),onInput:q,onRejected:y},{prepend:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"attach_file"})])),_:1},8,["modelValue","accept"]),(0,a.Wm)(u,{class:"col-md-4 col-lg-3",modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=e=>f.value=e),type:"string","stack-label":"",label:"Change file name"},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(h,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{flat:"",color:"primary",label:"Cancel",onClick:(0,n.SU)(d)},null,8,["onClick"]),(0,a.Wm)(w,{flat:"",color:"primary",type:"submit",label:"OK"})])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var Ce=t(8326),We=t(1527);const xe=qe,Ue=xe;q()(qe,"components",{QDialog:te.Z,QCard:h.Z,QBar:_e.Z,QIcon:be.Z,QForm:Ce.Z,QCardSection:v.Z,QFile:We.Z,QInput:A.Z,QCardActions:ye.Z,QBtn:K.Z});const Se={class:"q-py-sm flex"},Ze={class:"block q-mx-sm"},Ve={__name:"Toolbar",setup(e){const l=(0,i.E)(),t=(0,de.B)(),r=(0,s.Z)(),c=(0,z.T)();(0,a.bv)((()=>{setTimeout((()=>{console.log("load from repository"),c.loadRepoConfig(),setTimeout((()=>{c.getRepoFiles()}),500)}),300)}));const d=(0,n.iH)([{id:"json",label:"Json"},{id:"svg",label:"SVG"},{id:"png",label:"PNG"}]),m=(0,n.iH)([{id:"json",label:"Json"}]),u=(0,a.Fl)({get:()=>l.getDark,set:e=>l.updateDark(e)}),p=(0,a.Fl)({get:()=>t.getCurrentFile,set:e=>t.loadFile(e)}),g=(0,a.Fl)((()=>t.getFiles)),f=(0,a.Fl)((()=>c.getFiles)),_=e=>t.deleteFile(e),b=()=>t.newFile(),y=()=>t.saveFile(),w=()=>c.sendInRepo(),h=e=>c.loadFromRepo(e),v=e=>t.loadFile(e),k=e=>{r.dialog({title:"Confirm Deletion",message:`Are you sure you want to delete the file '${e}'?`,cancel:!0,persistent:!0}).onOk((()=>{console.log("delete confirmed",e),_(e)}))},q=e=>{void 0===e&&(e=t.currentFile),r.dialog({title:"Rename file",message:"Enter a new file name below.",prompt:{model:e,type:"text"},cancel:!0,persistent:!1}).onOk((e=>{console.log("rename to ",e),t.renameFile(e)}))},C=()=>{r.dialog({component:ce})},W=e=>{var l=t.getCurrentFile.split("/"),a=l[l.length-1].split(".")[0]+"."+e;console.log(l),r.dialog({component:he,componentProps:{id:e,file_name:a}})},x=e=>{console.log(e),r.dialog({component:Ue,componentProps:{id:e}})};return(e,l)=>{const t=(0,a.up)("q-item-label"),i=(0,a.up)("q-item-section"),s=(0,a.up)("q-btn"),r=(0,a.up)("q-item"),_=(0,a.up)("q-separator"),U=(0,a.up)("q-list"),S=(0,a.up)("q-btn-dropdown"),Z=(0,a.up)("q-icon"),V=(0,a.up)("q-space"),Q=(0,a.up)("q-toggle"),I=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Se,[(0,a.Wm)(S,{split:"",dense:"","no-caps":"",class:"dbml-fileselector bg-secondary",align:"left",onClick:l[0]||(l[0]=()=>q()),anchor:"bottom right",self:"top right"},{label:(0,a.w5)((()=>[(0,a._)("span",Ze,(0,o.zw)(p.value),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(U,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.value,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e,clickable:"",onClick:()=>v(e)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(i,{thumbnail:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:"delete",size:"sm",flat:"",dense:"",round:"",onClick:()=>k(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,a.Wm)(_),(0,a.Wm)(r,{clickable:"",dense:"",onClick:b},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,{class:"text-italic"},{default:(0,a.w5)((()=>[(0,a.Uk)("Create New File")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(s,{padding:"sm",size:"md",class:"bg-secondary q-mx-xs",onClick:y},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{size:"xs",name:"save"})])),_:1}),(0,a.Wm)(s,{padding:"sm",size:"md",class:"bg-secondary q-mx-xs",onClick:w},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{size:"sm",name:"cloud_upload"})])),_:1}),(0,a.Wm)(S,{padding:"xs sm",size:"md",color:"secondary",class:"q-mx-xs",onShow:(0,n.SU)(c).getRepoFiles},{label:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"q-mr-sm",size:"sm",name:"cloud_download"}),(0,a.Uk)(" Take from repo ")])),default:(0,a.w5)((()=>[(0,a.Wm)(U,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.value,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(r,{key:e,clickable:"",onClick:()=>h(e)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[I]]))),128))])),_:1})])),_:1},8,["onShow"]),(0,a.Wm)(S,{padding:"xs sm",size:"md",color:"secondary",class:"q-mx-xs"},{label:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"q-mr-sm",size:"xs",name:"file_download"}),(0,a.Uk)(" Export ")])),default:(0,a.w5)((()=>[(0,a.Wm)(U,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.value,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.id,clickable:"",onClick:l=>W(e.id),dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,a.Wm)(S,{padding:"xs sm",size:"md",color:"secondary",class:"q-mx-xs"},{label:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"q-mr-sm",size:"xs",name:"file_upload"}),(0,a.Uk)(" Import ")])),default:(0,a.w5)((()=>[(0,a.Wm)(U,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.value,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.id,clickable:"",onClick:l=>x(e.id),dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})]),(0,a.Wm)(V),(0,a.Wm)(s,{padding:"sm",size:"md",class:"bg-secondary",onClickCapture:l[1]||(l[1]=e=>u.value=!u.value)},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"q-mr-xs",size:"xs",name:"dark_mode"}),(0,a.Wm)(Q,{ref:"dark_toggle",class:"q-ml-sm no-pointer-events",size:"sm",dense:"",color:"primary","model-value":u.value,dark:u.value},null,8,["model-value","dark"])])),_:1}),(0,a.Wm)(s,{padding:"sm",size:"md",class:"bg-secondary q-mx-xs",style:{"touch-action":"auto"},onClick:C},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{size:"xs",name:"settings"})])),_:1})],64)}}};var Qe=t(2889),Ie=t(3246),De=t(490),Fe=t(6749),ze=t(3115),Re=t(3175),He=t(2146);const $e=(0,w.Z)(Ve,[["__scopeId","data-v-8bba0522"]]),Te=$e;q()(Ve,"components",{QBtnDropdown:Qe.Z,QList:Ie.Z,QItem:De.Z,QItemSection:Fe.Z,QItemLabel:ze.Z,QBtn:K.Z,QSeparator:O.Z,QIcon:be.Z,QSpace:M.Z,QToggle:Re.Z}),q()(Ve,"directives",{ClosePopup:He.Z})}}]);